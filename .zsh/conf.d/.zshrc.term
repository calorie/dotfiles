function powerline_precmd() {
  eval "$(powerline-go -error $? -shell zsh -eval -modules user,cwd,root)"
}

function install_powerline_precmd() {
  for s in "${precmd_functions[@]}"; do
    if [ "$s" = 'powerline_precmd' ]; then
      return
    fi
  done
  precmd_functions+=(powerline_precmd)
}

if [ "$TERM" != 'linux' ] && command -v powerline-go >/dev/null 2>&1; then
  install_powerline_precmd
fi
